<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ClipFlow.ViewModels"
             xmlns:loc="using:ClipFlow.Localization"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="450"
             x:Class="ClipFlow.Views.DirectCopyView"
             x:DataType="vm:DirectCopyViewModel">

    <Grid RowDefinitions="*,Auto">
        <!-- Drop Zone -->
        <Border Classes="DropZone" 
                DragDrop.AllowDrop="True"
                Margin="10">
            <Grid RowDefinitions="*,Auto">
                <StackPanel Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="15">
                    <PathIcon Data="{StaticResource IconCopy}" Width="48" Height="48" Opacity="0.5"/>
                    <TextBlock Text="{Binding StatusMessage}" TextAlignment="Center" Opacity="0.8"/>
                </StackPanel>

                <!-- Success Overlay -->
                <Border Grid.Row="0" 
                        Background="#204CAF50" 
                        IsVisible="{Binding IsSuccess}"
                        CornerRadius="8"
                        VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="10">
                        <PathIcon Data="{StaticResource IconCheck}" Foreground="#4CAF50" Width="32" Height="32"/>
                        <TextBlock Text="{loc:Translate status.success}" 
                                   Foreground="#4CAF50" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- Recent Files -->
                <Expander Grid.Row="1" Header="{loc:Translate recent.title}" 
                          Margin="0,10,0,0">
                    <StackPanel Spacing="5">
                        <ItemsControl ItemsSource="{Binding Data.RecentProjects}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Button Content="{Binding}" 
                                            Command="{Binding $parent[UserControl].((vm:DirectCopyViewModel)DataContext).CopyRecentFileCommand}"
                                            CommandParameter="{Binding}"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Left"
                                            Background="Transparent"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <Button Content="{loc:Translate recent.clear}" 
                                Command="{Binding ClearRecentFilesCommand}"
                                HorizontalAlignment="Right"
                                Background="Transparent"
                                Foreground="Red"/>
                    </StackPanel>
                </Expander>
            </Grid>
        </Border>

        <!-- Loading Bar -->
        <ProgressBar Grid.Row="1" IsIndeterminate="True" IsVisible="{Binding IsBusy}" Height="2"/>
    </Grid>
</UserControl>
